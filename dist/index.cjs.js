"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Entity{constructor(e,t,s){this.key=e,this.oldValue=t,this.value=s}}const store=Symbol("store"),observers=Symbol("observers"),kvStore=Object.seal(class{constructor(){this[store]=new Map,this[observers]=new Set}get(e){return Promise.resolve(this[store].get(e))}set(e,t){const s=new Entity(e,this[store].get(e),t);return new Promise((e,t)=>{void 0===s.value?this[store].delete(s.key)?e():t(new Error("Key was not found.")):(this[store].set(s.key,s.value),e())}).then(this.notify(s))}delete(e){const t=new Entity(e,this[store].get(e));return new Promise((e,s)=>{this[store].delete(t.key)?e():s(new Error("Key was not found."))}).then(this.notify(t))}observe(e){return new Promise((t,s)=>{"function"==typeof e?(this[observers].add(e),t()):s(new Error("Callback should be of type 'function'."))})}disconnect(e){return new Promise((t,s)=>{this[observers].delete(e)?t():s(new Error("Callback was not registered."))})}notify(e){this[observers].forEach(t=>t(e))}});exports.kvStore=kvStore;
//# sourceMappingURL=index.cjs.js.map
